package com.renpin.service.Impl;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.renpin.domin.CommentInfo;
import com.renpin.domin.CreditAndCharmForTask;
import com.renpin.domin.CustomerInfo;
import com.renpin.domin.TaskIcon;
import com.renpin.domin.TaskInfo;
import com.renpin.domin.UpdateData;
import com.renpin.service.GoodService;

public class GoodServiceImpl implements GoodService {

	@Override
	public int SendAdviceText(String strAdvice) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/sendadvicetext.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strAdvice", strAdvice));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseSendAdviceText(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseSendAdviceText(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nsendadviceret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public List<TaskInfo> GetTaskInfo(int nType) {

		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getTaskInfo.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("TaskType", nType + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					return parseHotelsInfoObjJosn(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return null;
	}

	// 解析json的单个对象
	private List<TaskInfo> parseHotelsInfoObjJosn(String json) {
		List<TaskInfo> tasks = new ArrayList<TaskInfo>();
		try {
			JSONArray array = new JSONObject(json).getJSONArray("taskinfos");
			for (int i = 0; i < array.length(); i++) {
				JSONObject obj = array.getJSONObject(i);
				TaskInfo task = new TaskInfo(obj.getString("mstrTaskRegion"),
						obj.getString("mTaskAskPersonIcon"),
						obj.getString("mPersonName"),
						obj.getString("mTaskTitle"), obj.getString("mstrId"),
						obj.getDouble("mdLongitude"),
						obj.getDouble("mdLatidude"),
						obj.getString("mTaskAnnounceTime"),
						obj.getString("mTimeLimit"),
						obj.getString("mTaskDetail"),
						obj.getString("mRunSeconds"),
						obj.getString("mTaskImplementName"),
						obj.getInt("mnValiableStatus"),
						obj.getInt("mnImplementStatus"),
						obj.getInt("mnTaskType"),
						obj.getInt("nTaskSelectType"),
						obj.getInt("nTaskFinishType"),
						obj.getInt("nTaskVerifiType"),
						obj.getInt("nTaskAnnounceCommentType"),
						obj.getInt("nTaskImplementCommentType"),
						obj.getInt("nDynamicNewsNum"),
						obj.getString("strTaskAccountCommentContent"),
						obj.getString("strTaskAccountImage"),
						obj.getString("strTaskImplementCommentContent"),
						obj.getString("strTaskImplementImage"));
				tasks.add(task);
			}
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return tasks;
	}

	@Override
	public int RegisterCustomer(String strBase64CustomerIcon, String strName,
			String strPassword, String strCreditValue, String strCharmValue) {
		int nRetType = 1;// 为0表示成功,1表示失败,2表示账号重名
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/registercustomer.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("PersonIcon", strBase64CustomerIcon));
		paramas.add(new BasicNameValuePair("PersonName", strName));
		paramas.add(new BasicNameValuePair("Password", strPassword));
		paramas.add(new BasicNameValuePair("CreditValue", strCreditValue));
		paramas.add(new BasicNameValuePair("CharmValue", strCharmValue));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			if (httpResponse.getStatusLine().getStatusCode() == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nRetType = parseRegisterType(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nRetType;
	}

	// 解析json的单个对象
	private int parseRegisterType(String json) {
		int nTicketNum = 1;// 为0表示成功,1表示失败,2表示账号重名
		try {
			nTicketNum = new JSONObject(json).getInt("bregeditret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nTicketNum;
	}

	@Override
	public CustomerInfo LogIn(String strName, String strPassword) {
		CustomerInfo customer = null;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/login.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("PersonName", strName));
		paramas.add(new BasicNameValuePair("Password", strPassword));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					customer = parseLogInType(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return customer;
	}

	// 解析json的单个对象
	private CustomerInfo parseLogInType(String json) {
		CustomerInfo customer = null;
		JSONObject obj = null;
		try {
			obj = new JSONObject(json).getJSONObject("customerinfo");
			customer = new CustomerInfo(obj.getString("sex"),
					obj.getString("detail"), obj.getInt("age"),
					obj.getInt("score"), obj.getString("strIcon"),
					obj.getInt("nCreditValue"), obj.getInt("nCharmValue"));
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return customer;
	}

	@Override
	public int AddTaskInfo(int nTaskType, String strRegionName,
			String strTaskTitle, String strTaskDeatial,
			String strTaskAnnounceTime, String strTaskImpleTime,
			String strTaskAccountName, String strImplementAccountName,
			double dLongitude, double dLatidude, String strTaskAccountIcon,
			String strTimeLimit,
			String strIcon1,// 第一张压缩图片(下面类似)
			String strIcon2, String strIcon3, String strIcon4, String strIcon5,
			String strIcon6) {
		int nRetType = 1;// 为0表示成功,1表示失败
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/addtaskinfo.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("nTaskType", nTaskType + ""));
		paramas.add(new BasicNameValuePair("strRegionName", strRegionName));
		paramas.add(new BasicNameValuePair("strTaskTitle", strTaskTitle));
		paramas.add(new BasicNameValuePair("strTaskDeatial", strTaskDeatial));
		paramas.add(new BasicNameValuePair("strTaskAnnounceTime",
				strTaskAnnounceTime));
		paramas.add(new BasicNameValuePair("strTaskImpleTime", strTaskImpleTime));
		paramas.add(new BasicNameValuePair("strTaskAccountName",
				strTaskAccountName));
		paramas.add(new BasicNameValuePair("strImplementAccountName",
				strImplementAccountName));
		paramas.add(new BasicNameValuePair("dLongitude", dLongitude + ""));
		paramas.add(new BasicNameValuePair("dLatidude", dLatidude + ""));
		paramas.add(new BasicNameValuePair("strTaskAccountIcon",
				strTaskAccountIcon));
		paramas.add(new BasicNameValuePair("strTimeLimit", strTimeLimit));
		paramas.add(new BasicNameValuePair("strIcon1", strIcon1));
		paramas.add(new BasicNameValuePair("strIcon2", strIcon2));
		paramas.add(new BasicNameValuePair("strIcon3", strIcon3));
		paramas.add(new BasicNameValuePair("strIcon4", strIcon4));
		paramas.add(new BasicNameValuePair("strIcon5", strIcon5));
		paramas.add(new BasicNameValuePair("strIcon6", strIcon6));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			if (httpResponse.getStatusLine().getStatusCode() == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nRetType = parseAddTaskInfoType(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nRetType;
	}

	// 解析json的单个对象
	private int parseAddTaskInfoType(String json) {
		int nTicketNum = 1;// 为0表示成功,1表示失败
		try {
			nTicketNum = new JSONObject(json).getInt("baddtaskret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nTicketNum;
	}

	@Override
	public int SelectTask(String strTaskId, String strPersonName, String strType) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/selecttask.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("PersonName", strPersonName));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseTaskSelectType(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseTaskSelectType(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nselecttaskret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public List<TaskInfo> GetMsgInfoNum(String strAnnounceName) {
		List<TaskInfo> DynamicNews = new ArrayList<TaskInfo>();
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getmsgnum.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("AnnounceName", strAnnounceName));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					DynamicNews = parseDynameicMsgNum(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return DynamicNews;
	}

	// 解析json的单个对象
	private List<TaskInfo> parseDynameicMsgNum(String json) {
		List<TaskInfo> DynamicNews = new ArrayList<TaskInfo>();
		try {
			JSONArray array = new JSONObject(json).getJSONArray("taskinfos");
			for (int i = 0; i < array.length(); i++) {
				JSONObject obj = array.getJSONObject(i);
				TaskInfo TaskNew = new TaskInfo(
						obj.getString("mstrTaskRegion"),
						obj.getString("mTaskAskPersonIcon"),
						obj.getString("mPersonName"),
						obj.getString("mTaskTitle"), obj.getString("mstrId"),
						obj.getDouble("mdLongitude"),
						obj.getDouble("mdLatidude"),
						obj.getString("mTaskAnnounceTime"),
						obj.getString("mTimeLimit"),
						obj.getString("mTaskDetail"),
						obj.getString("mRunSeconds"),
						obj.getString("mTaskImplementName"),
						obj.getInt("mnValiableStatus"),
						obj.getInt("mnImplementStatus"),
						obj.getInt("mnTaskType"),
						obj.getInt("nTaskSelectType"),
						obj.getInt("nTaskFinishType"),
						obj.getInt("nTaskVerifiType"),
						obj.getInt("nTaskAnnounceCommentType"),
						obj.getInt("nTaskImplementCommentType"),
						obj.getInt("nDynamicNewsNum"),
						obj.getString("strTaskAccountCommentContent"),
						obj.getString("strTaskAccountImage"),
						obj.getString("strTaskImplementCommentContent"),
						obj.getString("strTaskImplementImage"));
				DynamicNews.add(TaskNew);
			}
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return DynamicNews;
	}

	@Override
	public int UpdateTaskSelectType(String strAnnounceName, int nValue,
			String strTaskId, String strType) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/updatetaskselecttype.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("AnnounceName", strAnnounceName));
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("nValue", nValue + ""));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseupdatetaskselecttype(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseupdatetaskselecttype(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("announceret1");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int UpdateTaskFinishType(int nTaskType, String strAnnounceName,
			int nValue, String strTaskId, String strBase64Image,
			String strCommentContent) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/updatetaskfinishtype.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("AnnounceName", strAnnounceName));
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("nValue", nValue + ""));
		paramas.add(new BasicNameValuePair("Base64Image", strBase64Image));
		paramas.add(new BasicNameValuePair("CommentContent", strCommentContent));
		paramas.add(new BasicNameValuePair("nTaskType", nTaskType + ""));

		try {
			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseupdatetaskfinishtype(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseupdatetaskfinishtype(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("announceret2");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int UpdateTaskImplementCommentType(String strAnnounceName,
			int nValue, String strTaskId, String strType) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/updatetaskimplementcommenttype.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("AnnounceName", strAnnounceName));
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("nValue", nValue + ""));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseupdatetaskimplementcommenttype(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseupdatetaskimplementcommenttype(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("announceret3");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int UpdateTaskVerifiType(int nTaskType, String strAnnounceName,
			int nValue, String strTaskId, String strBase64Image,
			String strCommentContent) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/updatetaskverifitype.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("AnnounceName", strAnnounceName));
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("nValue", nValue + ""));
		paramas.add(new BasicNameValuePair("Base64Image", strBase64Image));
		paramas.add(new BasicNameValuePair("CommentContent", strCommentContent));
		paramas.add(new BasicNameValuePair("nTaskType", nTaskType + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseupdatetaskverifitype(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseupdatetaskverifitype(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("implementret1");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int UpdateTaskAnnounceCommentType(String strAnnounceName,
			int nValue, String strTaskId, String strType) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/updatetaskannouncecommenttype.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("AnnounceName", strAnnounceName));
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("nValue", nValue + ""));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseupdatetaskannouncecommenttype(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseupdatetaskannouncecommenttype(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("implementret2");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public List<CommentInfo> GetCommentsForTask(String strTaskId, String strType) {
		List<CommentInfo> Comments = new ArrayList<CommentInfo>();
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getcomments.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					Comments = parseComments(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return Comments;
	}

	// 解析json的单个对象
	private List<CommentInfo> parseComments(String json) {
		List<CommentInfo> Comments = new ArrayList<CommentInfo>();
		try {
			JSONArray array = new JSONObject(json).getJSONArray("commentinfos");
			for (int i = 0; i < array.length(); i++) {
				JSONObject obj = array.getJSONObject(i);
				CommentInfo comment = new CommentInfo(
						obj.getString("strCommentPersonImage"),
						obj.getString("strCommentPersonName"),
						obj.getString("strCommentReceivePersonName"),
						obj.getString("strCommentTime"),
						obj.getString("strCommentContent"),
						obj.getString("strSmallImage"),
						obj.getInt("nCommentIndex"));
				Comments.add(comment);
			}
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return Comments;
	}

	@Override
	public String GetCommentsLargeImage(String strTaskId, String strType,
			int nCommentIndex) {
		String strLargeImage = "";
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getcommentslargeimage.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("TaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strType", strType));
		paramas.add(new BasicNameValuePair("nCommentIndex", nCommentIndex + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					strLargeImage = parseGetCommentsLargeImage(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return strLargeImage;
	}

	// 解析json的单个对象
	private String parseGetCommentsLargeImage(String json) {
		String strIcon = "";
		try {
			strIcon = new JSONObject(json).getString("strcommentlargeimage");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return strIcon;
	}

	@Override
	public int SendCommentContent(String strTaskId,
			String strCommentPersonName, String strReceiveCommentPersonName,
			String strCommentContent, String strCommentPersonImage,
			String strType) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/sendcommentcontent.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strCommentPersonName",
				strCommentPersonName));
		paramas.add(new BasicNameValuePair("strReceiveCommentPersonName",
				strReceiveCommentPersonName));
		paramas.add(new BasicNameValuePair("strCommentContent",
				strCommentContent));
		paramas.add(new BasicNameValuePair("strCommentImage",
				strCommentPersonImage));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseSendCommentContent(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseSendCommentContent(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nsendcommentret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int SendCommentImage(String strTaskId, String strCommentPersonName,
			String strReceiveCommentPersonName, String strCommentPersonImage,
			String strSmallImage, String strLargeImage, String strType) {

		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/sendcommentimage.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strCommentPersonName",
				strCommentPersonName));
		paramas.add(new BasicNameValuePair("strReceiveCommentPersonName",
				strReceiveCommentPersonName));
		paramas.add(new BasicNameValuePair("strCommentImage",
				strCommentPersonImage));
		paramas.add(new BasicNameValuePair("strSmallImage", strSmallImage));
		paramas.add(new BasicNameValuePair("strLargeImage", strLargeImage));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseSendCommentImage(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseSendCommentImage(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nsendcommentimageret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public UpdateData GetUpdateSignal(String strCurrentAccountName) {

		UpdateData update = null;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getupdatasignl.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strCurrentAccountName",
				strCurrentAccountName));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					update = parseGetUpdateSignal(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		if (null == update) {
			update = new UpdateData(-1, "");
		}
		return update;
	}

	// 解析json的单个对象
	private UpdateData parseGetUpdateSignal(String json) {
		UpdateData update = new UpdateData(-1, "");
		JSONObject obj = null;
		try {
			obj = new JSONObject(json).getJSONObject("nupdatevalue");
			update.setnUpdateSignal(obj.getInt("nUpdateSignal"));
			update.setstrUpdateDescribe(obj.getString("strUpdateDescribe"));
			/*
			 * = new CustomerInfo(obj.getString("sex"), obj.getString("detail"),
			 * obj.getInt("age"), obj.getInt("score"), obj.getString("strIcon"),
			 * obj.getInt("nCreditValue"), obj.getInt("nCharmValue"));
			 */
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return update;
	}

	@Override
	public int SetUpdateSignal(String strCurrentAccountName, int nSignal) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/setupdatasignl.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strCurrentAccountName",
				strCurrentAccountName));
		paramas.add(new BasicNameValuePair("strUpdateValue", nSignal + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseSetUpdateSignal(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseSetUpdateSignal(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nsetupdatevalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int SetCreditValue(String strPersonName, int nCreditValue) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/setcreditvalue.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strPersonName", strPersonName));
		paramas.add(new BasicNameValuePair("nCreditValue", nCreditValue + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseSetCreditValue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseSetCreditValue(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nsetcreditvalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int SetCharmValue(String strPersonName, int nCharmValue) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/setcharmvalue.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strPersonName", strPersonName));
		paramas.add(new BasicNameValuePair("nCharmValue", nCharmValue + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseSetCharmValue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseSetCharmValue(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nsetcharmvalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int GetCreditValue(String strPersonName) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getcreditvalue.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strPersonName", strPersonName));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseGetCreditValue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseGetCreditValue(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("ngetcreditvalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int GetCharmValue(String strPersonName) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getcharmvalue.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strPersonName", strPersonName));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseGetCharmValue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseGetCharmValue(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("ngetcharmvalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int AddCreditValue(String strPersonName, int nIncrValue) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/addcreditvalue.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strPersonName", strPersonName));
		paramas.add(new BasicNameValuePair("nIncrValue", nIncrValue + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseAddCreditValue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseAddCreditValue(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("naddcreditvalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int AddCharmValue(String strPersonName, int nIncrValue) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/addcharmvalue.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strPersonName", strPersonName));
		paramas.add(new BasicNameValuePair("nIncrValue", nIncrValue + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseAddCharmValue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseAddCharmValue(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("naddcharmvalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public long GetTaskRemainTime(String strTaskId, String strType) {
		long lTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/gettaskremaintime.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strType", strType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					lTypeRet = parseGetRemainTimeValue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return lTypeRet;
	}

	// 解析json的单个对象
	private long parseGetRemainTimeValue(String json) {
		long lRet = 0;
		try {
			lRet = new JSONObject(json).getLong("ltaskremaintime");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return lRet;
	}

	@Override
	public List<TaskInfo> LoadTaskData(int nLimit, int nType, int nMaxTaskId) {
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/loadtaskdata.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("nLimit", nLimit + ""));
		paramas.add(new BasicNameValuePair("nType", nType + ""));
		paramas.add(new BasicNameValuePair("nMaxTaskId", nMaxTaskId + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					return parseLoadTaskData(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return null;
	}

	// 解析json的单个对象
	private List<TaskInfo> parseLoadTaskData(String json) {
		List<TaskInfo> tasks = new ArrayList<TaskInfo>();
		try {
			JSONArray array = new JSONObject(json)
					.getJSONArray("loadtaskinfos");
			for (int i = 0; i < array.length(); i++) {
				JSONObject obj = array.getJSONObject(i);
				TaskInfo task = new TaskInfo(obj.getString("mstrTaskRegion"),
						obj.getString("mTaskAskPersonIcon"),
						obj.getString("mPersonName"),
						obj.getString("mTaskTitle"), obj.getString("mstrId"),
						obj.getDouble("mdLongitude"),
						obj.getDouble("mdLatidude"),
						obj.getString("mTaskAnnounceTime"),
						obj.getString("mTimeLimit"),
						obj.getString("mTaskDetail"),
						obj.getString("mRunSeconds"),
						obj.getString("mTaskImplementName"),
						obj.getInt("mnValiableStatus"),
						obj.getInt("mnImplementStatus"),
						obj.getInt("mnTaskType"),
						obj.getInt("nTaskSelectType"),
						obj.getInt("nTaskFinishType"),
						obj.getInt("nTaskVerifiType"),
						obj.getInt("nTaskAnnounceCommentType"),
						obj.getInt("nTaskImplementCommentType"),
						obj.getInt("nDynamicNewsNum"),
						obj.getString("strTaskAccountCommentContent"),
						obj.getString("strTaskAccountImage"),
						obj.getString("strTaskImplementCommentContent"),
						obj.getString("strTaskImplementImage"));
				tasks.add(task);
			}
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return tasks;
	}

	@Override
	public List<TaskInfo> UpdateTaskData(int nLimit, int nType, int nMaxTaskId) {
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/updatetaskdata.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("nLimit", nLimit + ""));
		paramas.add(new BasicNameValuePair("nType", nType + ""));
		paramas.add(new BasicNameValuePair("nMaxTaskId", nMaxTaskId + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					return parseUpdateTaskData(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return null;
	}

	// 解析json的单个对象
	private List<TaskInfo> parseUpdateTaskData(String json) {
		List<TaskInfo> tasks = new ArrayList<TaskInfo>();
		try {
			JSONArray array = new JSONObject(json)
					.getJSONArray("updatetaskinfos");
			for (int i = 0; i < array.length(); i++) {
				JSONObject obj = array.getJSONObject(i);
				TaskInfo task = new TaskInfo(obj.getString("mstrTaskRegion"),
						obj.getString("mTaskAskPersonIcon"),
						obj.getString("mPersonName"),
						obj.getString("mTaskTitle"), obj.getString("mstrId"),
						obj.getDouble("mdLongitude"),
						obj.getDouble("mdLatidude"),
						obj.getString("mTaskAnnounceTime"),
						obj.getString("mTimeLimit"),
						obj.getString("mTaskDetail"),
						obj.getString("mRunSeconds"),
						obj.getString("mTaskImplementName"),
						obj.getInt("mnValiableStatus"),
						obj.getInt("mnImplementStatus"),
						obj.getInt("mnTaskType"),
						obj.getInt("nTaskSelectType"),
						obj.getInt("nTaskFinishType"),
						obj.getInt("nTaskVerifiType"),
						obj.getInt("nTaskAnnounceCommentType"),
						obj.getInt("nTaskImplementCommentType"),
						obj.getInt("nDynamicNewsNum"),
						obj.getString("strTaskAccountCommentContent"),
						obj.getString("strTaskAccountImage"),
						obj.getString("strTaskImplementCommentContent"),
						obj.getString("strTaskImplementImage"));
				tasks.add(task);
			}
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return tasks;
	}

	@Override
	public int UploadLargeImage(String strTaskId, String strTaskType,
			String strIcon1, String strIcon2, String strIcon3, String strIcon4,
			String strIcon5, String strIcon6) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/uploadlargeimage.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		paramas.add(new BasicNameValuePair("strIcon1", strIcon1));
		paramas.add(new BasicNameValuePair("strIcon2", strIcon2));
		paramas.add(new BasicNameValuePair("strIcon3", strIcon3));
		paramas.add(new BasicNameValuePair("strIcon4", strIcon4));
		paramas.add(new BasicNameValuePair("strIcon5", strIcon5));
		paramas.add(new BasicNameValuePair("strIcon6", strIcon6));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseUploadLargeImage(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseUploadLargeImage(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nuploadlargeimageret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int UploadTaskFinishTypeForLargeImage(String strTaskId,
			String strTaskType, String strBase64Image) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/uploadtaskfinishtypeforlargeimage.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		paramas.add(new BasicNameValuePair("strBase64Image", strBase64Image));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseUploadTaskFinishTypeForLargeImage(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseUploadTaskFinishTypeForLargeImage(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nuploadfinishimageret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int UploadTaskVerifiTypeForLargeImage(String strTaskId,
			String strTaskType, String strBase64Image) {
		int nTypeRet = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/uploadtaskverifitypeforlargeimage.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		paramas.add(new BasicNameValuePair("strBase64Image", strBase64Image));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nTypeRet = parseUploadTaskVerifiTypeForLargeImage(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nTypeRet;
	}

	// 解析json的单个对象
	private int parseUploadTaskVerifiTypeForLargeImage(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nuploadverifiimageret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public TaskIcon GetTaskSmallIcon(String strTaskId, String strTaskType) {
		TaskIcon taskicon = null;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/gettasksmallicon.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					taskicon = parseGetTaskSmallIcon(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return taskicon;
	}

	// 解析json的单个对象
	private TaskIcon parseGetTaskSmallIcon(String json) {
		TaskIcon taskicon = null;
		JSONObject obj = null;
		try {
			obj = new JSONObject(json).getJSONObject("mtaskicon");
			taskicon = new TaskIcon(obj.getString("strIcon1"),
					obj.getString("strIcon2"), obj.getString("strIcon3"),
					obj.getString("strIcon4"), obj.getString("strIcon5"),
					obj.getString("strIcon6"));
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return taskicon;
	}

	@Override
	public String GetTaskLargeIcon(String strTaskId, String strTaskType,
			int nIconId) {
		String strIcon = "";
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/gettasklargeicon.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		paramas.add(new BasicNameValuePair("nIconId", nIconId + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					strIcon = parseGetTaskLargeIcon(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return strIcon;
	}

	// 解析json的单个对象
	private String parseGetTaskLargeIcon(String json) {
		String strIcon = "";
		try {
			strIcon = new JSONObject(json).getString("strtaskicon");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return strIcon;
	}

	@Override
	public String GetTaskFinishLargeImage(String strTaskId, String strTaskType) {
		String strIcon = "";
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/gettaskfinishlargeimage.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					strIcon = parseGetTaskFinishLargeImage(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return strIcon;
	}

	// 解析json的单个对象
	private String parseGetTaskFinishLargeImage(String json) {
		String strIcon = "";
		try {
			strIcon = new JSONObject(json).getString("strtaskfinishlargeimage");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return strIcon;
	}

	@Override
	public String GetTaskVerifiLargeImage(String strTaskId, String strTaskType) {
		String strIcon = "";
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/gettaskverifilargeimage.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					strIcon = parseGetTaskVerifiLargeImage(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return strIcon;
	}

	// 解析json的单个对象
	private String parseGetTaskVerifiLargeImage(String json) {
		String strIcon = "";
		try {
			strIcon = new JSONObject(json).getString("strtaskverifilargeimage");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return strIcon;
	}

	@Override
	public int ResetTaskStatue(String strTaskId, String strTaskType) {
		int nRet1 = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/resettaskstatue.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nRet1 = parseResetTaskStatue(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nRet1;
	}

	// 解析json的单个对象
	private int parseResetTaskStatue(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nretsettaskret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public int RecordCreditAndCharmForTask(String strTaskId,
			String strTaskType, int nCredit, int nCharm) {
		int nRet1 = 0;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/recordcreditandcharmfortask.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		paramas.add(new BasicNameValuePair("nCredit", nCredit + ""));
		paramas.add(new BasicNameValuePair("nCharm", nCharm + ""));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					nRet1 = parseRecordCreditAndCharmForTask(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return nRet1;
	}

	// 解析json的单个对象
	private int parseRecordCreditAndCharmForTask(String json) {
		int nRet = 0;
		try {
			nRet = new JSONObject(json).getInt("nrecordvalueret");
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return nRet;
	}

	@Override
	public CreditAndCharmForTask GetCreditAndCharmForTask(String strTaskId,
			String strTaskType) {
		CreditAndCharmForTask taskvalue = null;
		// 创建请求的url
		String url = "http://59.60.9.202:8000/RenPinServer/renpin/getcreditandcharmfortask.action";
		// 使用HttpPost发送请求
		HttpPost httpPost = new HttpPost(url);
		// 使用NameValuePaira保存请求中所需要传入的参数
		List<NameValuePair> paramas = new ArrayList<NameValuePair>();
		paramas.add(new BasicNameValuePair("strTaskId", strTaskId));
		paramas.add(new BasicNameValuePair("strTaskType", strTaskType));
		try {

			HttpResponse httpResponse;
			// 将NameValuePair放入HttpPost请求体
			httpPost.setEntity(new UrlEncodedFormEntity(paramas, HTTP.UTF_8));
			// 执行HttpPost请求
			httpResponse = new DefaultHttpClient().execute(httpPost);
			// 如果响应码为200则表示获取成功，否则为发生错误
			int nRet = httpResponse.getStatusLine().getStatusCode();
			if (nRet == 200) {
				HttpEntity entity = httpResponse.getEntity();
				if (entity != null) {
					// 获取服务器响应的json字符串
					String json = EntityUtils.toString(entity, "UTF-8");
					taskvalue = parseGetCreditAndCharmForTask(json);
				}
			}

		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return taskvalue;
	}

	// 解析json的单个对象
	private CreditAndCharmForTask parseGetCreditAndCharmForTask(String json) {
		CreditAndCharmForTask taskvalue = null;
		JSONObject obj = null;
		try {
			obj = new JSONObject(json).getJSONObject("creditandcharm");
			taskvalue = new CreditAndCharmForTask(obj.getInt("nCreditValue"),
					obj.getInt("nCharmValue"));
		} catch (JSONException e) {
			e.printStackTrace();
		}
		return taskvalue;
	}
}
